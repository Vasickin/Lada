<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <!--
        META AND BASIC SETUP / –ú–ï–¢–ê–î–ê–ù–ù–´–ï –ò –ë–ê–ó–û–í–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê
        Character set, viewport, and page title / –ö–æ–¥–∏—Ä–æ–≤–∫–∞, –≤—å—é–ø–æ—Ä—Ç –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É - Community CMS</title>

    <!--
        BOOTSTRAP 5 CSS / –ë–ò–ë–õ–ò–û–¢–ï–ö–ê BOOTSTRAP 5
        Using CDN for quick setup / –ò—Å–ø–æ–ª—å–∑—É–µ–º CDN –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* Custom styles for better form UX / –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ UX —Ñ–æ—Ä–º—ã */
        .form-label.required:after {
            content: " *";
            color: #dc3545;
        }
        .slug-preview {
            background-color: #f8f9fa;
            border-radius: 0.375rem;
            padding: 0.375rem 0.75rem;
            font-family: monospace;
        }
    </style>
</head>
<body>
<!--
    MAIN CONTAINER / –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–†
    Bootstrap container for proper layout / Bootstrap –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å—Ç–∫–∏
-->
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">

            <!--
                PAGE HEADER / –ó–ê–ì–û–õ–û–í–û–ö –°–¢–†–ê–ù–ò–¶–´
                With back navigation / –° –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –Ω–∞–∑–∞–¥
            -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1>üìÑ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</h1>
                <a th:href="@{/pages}" class="btn btn-outline-secondary">
                    ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
                </a>
            </div>

            <!--
                CREATE FORM CARD / –ö–ê–†–¢–û–ß–ö–ê –§–û–†–ú–´ –°–û–ó–î–ê–ù–ò–Ø
                Main form container / –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ñ–æ—Ä–º—ã
            -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</h5>
                </div>

                <div class="card-body">
                    <!--
                        ERROR MESSAGES / –°–û–û–ë–©–ï–ù–ò–Ø –û–ë –û–®–ò–ë–ö–ê–•
                        Display form errors and validation messages /
                        –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
                    -->
                    <div th:if="${error}" class="alert alert-danger" role="alert">
                        <strong>–û—à–∏–±–∫–∞:</strong>
                        <span th:text="${error}">–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ</span>
                    </div>

                    <!--
                        CREATE PAGE FORM / –§–û–†–ú–ê –°–û–ó–î–ê–ù–ò–Ø –°–¢–†–ê–ù–ò–¶–´
                        Form for creating new pages with validation /
                        –§–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
                    -->
                    <form th:action="@{/pages/create}"
                          th:object="${page}"
                          method="post"
                          id="createPageForm">

                        <!--
                            TITLE FIELD / –ü–û–õ–ï –ó–ê–ì–û–õ–û–í–ö–ê
                            Most important field with character counter /
                            –°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –ø–æ–ª–µ —Å–æ —Å—á–µ—Ç—á–∏–∫–æ–º —Å–∏–º–≤–æ–ª–æ–≤
                        -->
                        <div class="mb-3">
                            <label for="title" class="form-label required">
                                –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                            </label>
                            <input type="text"
                                   class="form-control"
                                   id="title"
                                   th:field="*{title}"
                                   placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã"
                                   maxlength="255"
                                   required>
                            <div class="form-text">
                                <!-- Character counter / –°—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤ -->
                                <span id="titleCounter">0</span>/255 —Å–∏–º–≤–æ–ª–æ–≤
                            </div>
                            <!-- Validation errors / –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ -->
                            <div th:if="${#fields.hasErrors('title')}" class="invalid-feedback d-block">
                                <span th:errors="*{title}">–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏</span>
                            </div>
                        </div>

                        <!--
                            SLUG FIELD / –ü–û–õ–ï SLUG
                            URL-friendly identifier with auto-generation /
                            –ß–µ–ª–æ–≤–µ–∫–æ-–ø–æ–Ω—è—Ç–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä URL —Å –∞–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
                        -->
                        <div class="mb-3">
                            <label for="slug" class="form-label required">
                                Slug (URL –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
                            </label>
                            <div class="input-group">
                                <input type="text"
                                       class="form-control"
                                       id="slug"
                                       th:field="*{slug}"
                                       placeholder="nazvanie-stranicy"
                                       pattern="[a-z0-9-]+"
                                       required>
                                <button type="button"
                                        class="btn btn-outline-secondary"
                                        id="generateSlug">
                                    üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
                                </button>
                            </div>
                            <div class="form-text">
                                <!-- Slug preview / –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä slug -->
                                <strong>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä URL:</strong>
                                <span class="slug-preview">
                                        http://localhost:8080/pages/<span id="slugPreview">slug</span>
                                    </span>
                            </div>
                            <div class="form-text">
                                –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ, —Ü–∏—Ñ—Ä—ã –∏ –¥–µ—Ñ–∏—Å—ã
                            </div>
                            <!-- Validation errors / –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ -->
                            <div th:if="${#fields.hasErrors('slug')}" class="invalid-feedback d-block">
                                <span th:errors="*{slug}">–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏</span>
                            </div>
                        </div>

                        <!--
                            CONTENT FIELD / –ü–û–õ–ï –°–û–î–ï–†–ñ–ò–ú–û–ì–û
                            Main content area with basic formatting help /
                            –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
                        -->
                        <div class="mb-3">
                            <label for="content" class="form-label required">
                                –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                            </label>
                            <textarea class="form-control"
                                      id="content"
                                      th:field="*{content}"
                                      rows="12"
                                      placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã..."
                                      required></textarea>
                            <div class="form-text">
                                <!-- Formatting tips / –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—é -->
                                <strong>–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:</strong>
                                –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTML —Ç–µ–≥–∏ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
                            </div>
                            <!-- Validation errors / –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ -->
                            <div th:if="${#fields.hasErrors('content')}" class="invalid-feedback d-block">
                                <span th:errors="*{content}">–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏</span>
                            </div>
                        </div>

                        <!--
                            PUBLICATION SETTINGS / –ù–ê–°–¢–†–û–ô–ö–ò –ü–£–ë–õ–ò–ö–ê–¶–ò–ò
                            Draft vs published status / –°—Ç–∞—Ç—É—Å —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –∏–ª–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
                        -->
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input"
                                       type="checkbox"
                                       id="published"
                                       th:field="*{published}">
                                <label class="form-check-label" for="published">
                                    –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É
                                </label>
                            </div>
                            <div class="form-text">
                                –ï—Å–ª–∏ –Ω–µ –æ—Ç–º–µ—á–µ–Ω–æ, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫
                            </div>
                        </div>

                        <!--
                            FORM ACTIONS / –î–ï–ô–°–¢–í–ò–Ø –§–û–†–ú–´
                            Submit and cancel buttons / –ö–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –æ—Ç–º–µ–Ω—ã
                        -->
                        <div class="d-flex gap-2 justify-content-end">
                            <!-- Cancel button / –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã -->
                            <a th:href="@{/pages}" class="btn btn-secondary">
                                –û—Ç–º–µ–Ω–∞
                            </a>
                            <!-- Submit button / –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
                            <button type="submit" class="btn btn-primary">
                                üíæ –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!--
                QUICK HELP CARD / –ö–ê–†–¢–û–ß–ö–ê –ë–´–°–¢–†–û–ô –ü–û–ú–û–©–ò
                Helpful tips for users / –ü–æ–ª–µ–∑–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            -->
            <div class="card mt-4">
                <div class="card-header">
                    <h6 class="mb-0">üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Å—Ç—Ä–∞–Ω–∏—Ü</h6>
                </div>
                <div class="card-body">
                    <ul class="mb-0">
                        <li><strong>–ó–∞–≥–æ–ª–æ–≤–æ–∫:</strong> –ë—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ h1 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</li>
                        <li><strong>Slug:</strong> –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ URL, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º</li>
                        <li><strong>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:</strong> –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HTML —Ä–∞–∑–º–µ—Ç–∫—É –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</li>
                        <li><strong>–ü—É–±–ª–∏–∫–∞—Ü–∏—è:</strong> –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –≤ –∞–¥–º–∏–Ω–∫–µ</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!--
    BOOTSTRAP JAVASCRIPT / JAVASCRIPT –ë–ò–ë–õ–ò–û–¢–ï–ö–ò BOOTSTRAP
    Required for interactive components / –ù–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<!--
    CUSTOM JAVASCRIPT FOR FORM ENHANCEMENTS / –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ô JS –î–õ–Ø –£–õ–£–ß–®–ï–ù–ò–Ø –§–û–†–ú–´
    Auto-slug generation, character counters, etc. /
    –ê–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è slug, —Å—á–µ—Ç—á–∏–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤ –∏ —Ç.–¥.
-->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const titleInput = document.getElementById('title');
        const slugInput = document.getElementById('slug');
        const generateSlugBtn = document.getElementById('generateSlug');
        const titleCounter = document.getElementById('titleCounter');
        const slugPreview = document.getElementById('slugPreview');

        //
        // CHARACTER COUNTER FOR TITLE / –°–ß–ï–¢–ß–ò–ö –°–ò–ú–í–û–õ–û–í –î–õ–Ø –ó–ê–ì–û–õ–û–í–ö–ê
        //
        function updateTitleCounter() {
            titleCounter.textContent = titleInput.value.length;
        }

        titleInput.addEventListener('input', updateTitleCounter);
        updateTitleCounter(); // Initialize / –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

        //
        // AUTO-SLUG GENERATION / –ê–í–¢–û-–ì–ï–ù–ï–†–ê–¶–ò–Ø SLUG
        //
        function generateSlug(text) {
            return text
                .toLowerCase()
                .trim()
                .replace(/[^a-z0-9–∞-—è—ë\s-]/g, '') // Remove special chars / –£–¥–∞–ª—è–µ–º —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã
                .replace(/[–∞-—è—ë]/g, function(char) {
                    // Simple transliteration / –ü—Ä–æ—Å—Ç–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è
                    const translit = {
                        '–∞': 'a', '–±': 'b', '–≤': 'v', '–≥': 'g', '–¥': 'd',
                        '–µ': 'e', '—ë': 'yo', '–∂': 'zh', '–∑': 'z', '–∏': 'i',
                        '–π': 'y', '–∫': 'k', '–ª': 'l', '–º': 'm', '–Ω': 'n',
                        '–æ': 'o', '–ø': 'p', '—Ä': 'r', '—Å': 's', '—Ç': 't',
                        '—É': 'u', '—Ñ': 'f', '—Ö': 'h', '—Ü': 'ts', '—á': 'ch',
                        '—à': 'sh', '—â': 'sch', '—ä': '', '—ã': 'y', '—å': '',
                        '—ç': 'e', '—é': 'yu', '—è': 'ya'
                    };
                    return translit[char] || char;
                })
                .replace(/\s+/g, '-') // Replace spaces with dashes / –ó–∞–º–µ–Ω—è–µ–º –ø—Ä–æ–±–µ–ª—ã –Ω–∞ –¥–µ—Ñ–∏—Å—ã
                .replace(/-+/g, '-') // Remove multiple dashes / –£–¥–∞–ª—è–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–µ—Ñ–∏—Å—ã
                .replace(/^-+|-+$/g, ''); // Trim dashes from ends / –û–±—Ä–µ–∑–∞–µ–º –¥–µ—Ñ–∏—Å—ã —Å –∫–æ–Ω—Ü–æ–≤
        }

        // Generate slug from title / –ì–µ–Ω–µ—Ä–∞—Ü–∏—è slug –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞
        generateSlugBtn.addEventListener('click', function() {
            if (titleInput.value.trim()) {
                slugInput.value = generateSlug(titleInput.value);
                updateSlugPreview();
            }
        });

        // Auto-generate slug when title changes (if slug is empty) /
        // –ê–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è slug –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–µ—Å–ª–∏ slug –ø—É—Å—Ç–æ–π)
        titleInput.addEventListener('blur', function() {
            if (titleInput.value.trim() && !slugInput.value.trim()) {
                slugInput.value = generateSlug(titleInput.value);
                updateSlugPreview();
            }
        });

        //
        // SLUG PREVIEW UPDATE / –û–ë–ù–û–í–õ–ï–ù–ò–ï –ü–†–ï–î–ü–†–û–°–ú–û–¢–†–ê SLUG
        //
        function updateSlugPreview() {
            slugPreview.textContent = slugInput.value || 'slug';
        }

        slugInput.addEventListener('input', updateSlugPreview);
        updateSlugPreview(); // Initialize / –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

        //
        // FORM VALIDATION ENHANCEMENT / –£–õ–£–ß–®–ï–ù–ò–ï –í–ê–õ–ò–î–ê–¶–ò–ò –§–û–†–ú–´
        //
        document.getElementById('createPageForm').addEventListener('submit', function(e) {
            // Basic client-side validation / –ë–∞–∑–æ–≤–∞—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
            if (!titleInput.value.trim()) {
                e.preventDefault();
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã');
                titleInput.focus();
                return;
            }

            if (!slugInput.value.trim()) {
                e.preventDefault();
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ slug –∏–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏');
                slugInput.focus();
                return;
            }
        });
    });
</script>
</body>
</html>