<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - –ê–¥–º–∏–Ω–∫–∞ Community CMS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">

    <!-- –ó–ê–ì–û–õ–û–í–û–ö –°–¢–†–ê–ù–ò–¶–´ -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>üë• –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>
        <a th:href="@{/admin/users}" class="btn btn-outline-secondary">
            ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
        </a>
    </div>

    <!-- –°–û–û–ë–©–ï–ù–ò–Ø –û–ë –û–®–ò–ë–ö–ê–• -->
    <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
        <span th:text="${error}">–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞</span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <!-- –§–û–†–ú–ê –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø -->
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h5>
        </div>
        <div class="card-body">
            <form th:action="@{/admin/users/edit/{id}(id=${user.id})}" th:object="${user}" method="post">

                <!-- –°–ö–†–´–¢–û–ï –ü–û–õ–ï –° ID ‚úÖ FIX -->
                <input type="hidden" th:field="*{id}" />

                <!-- ID (–¢–û–õ–¨–ö–û –î–õ–Ø –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø) -->
                <div class="mb-3">
                    <label class="form-label">ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <input type="text" class="form-control" th:value="${user.id}" readonly>
                    <div class="form-text">–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å.</div>
                </div>

                <!-- –ò–ú–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (–¢–û–õ–¨–ö–û –î–õ–Ø –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø) -->
                <div class="mb-3">
                    <label class="form-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <input type="text" class="form-control" th:value="${user.username}" readonly>
                    <div class="form-text">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è.</div>
                </div>

                <!-- EMAIL -->
                <div class="mb-3">
                    <label for="email" class="form-label">Email *</label>
                    <input type="email" class="form-control" id="email"
                           th:field="*{email}"
                           placeholder="–í–≤–µ–¥–∏—Ç–µ email" required>
                    <div class="form-text">–î–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º.</div>
                </div>

                <!-- –ü–ê–†–û–õ–¨ (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û) -->
                <div class="mb-3">
                    <label for="password" class="form-label">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                    <input type="password" class="form-control" id="password"
                           th:field="*{password}"
                           placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å">
                    <div class="form-text">–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤. –ó–∞–ø–æ–ª–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å.</div>
                </div>

                <!-- –†–û–õ–ò -->
                <div class="mb-3">
                    <label class="form-label">–†–æ–ª–∏</label>
                    <div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="ADMIN"
                                   id="roleAdmin" name="roles" th:checked="${user.roles.contains('ADMIN')}">
                            <label class="form-check-label" for="roleAdmin">
                                <span class="badge bg-danger">ADMIN</span> - –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="EDITOR"
                                   id="roleEditor" name="roles" th:checked="${user.roles.contains('EDITOR')}">
                            <label class="form-check-label" for="roleEditor">
                                <span class="badge bg-warning text-dark">EDITOR</span> - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="USER"
                                   id="roleUser" name="roles" th:checked="${user.roles.contains('USER')}">
                            <label class="form-check-label" for="roleUser">
                                <span class="badge bg-info">USER</span> - –ë–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø
                            </label>
                        </div>
                    </div>
                </div>

                <!-- –°–¢–ê–¢–£–° -->
                <div class="mb-3">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch"
                               id="enabled" th:field="*{enabled}">
                        <label class="form-check-label" for="enabled">
                            –£—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –∞–∫—Ç–∏–≤–Ω–∞
                        </label>
                    </div>
                    <div class="form-text">–ï—Å–ª–∏ –≤—ã–∫–ª—é—á–µ–Ω–æ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É.</div>
                </div>

                <!-- –î–ê–¢–ê –°–û–ó–î–ê–ù–ò–Ø -->
                <div class="mb-3">
                    <label class="form-label">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</label>
                    <input type="text" class="form-control"
                           th:value="${#temporals.format(user.createdAt, 'dd.MM.yyyy HH:mm')}" readonly>
                </div>

                <!-- –ö–ù–û–ü–ö–ò -->
                <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-primary">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    </button>
                    <a th:href="@{/admin/users}" class="btn btn-outline-secondary">
                        –û—Ç–º–µ–Ω–∞
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Bootstrap JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>