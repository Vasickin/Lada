<!DOCTYPE html>
<!--
    NAVIGATION FRAGMENT - FIXED VERSION / –§–†–ê–ì–ú–ï–ù–¢ –ù–ê–í–ò–ì–ê–¶–ò–ò - –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø
    Fixed: Removed problematic httpServletRequest expressions causing 500 errors
    –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –£–±—Ä–∞–Ω—ã –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è httpServletRequest –≤—ã–∑—ã–≤–∞—é—â–∏–µ –æ—à–∏–±–∫–∏ 500

    Solution: Use simpler approach for active states without httpServletRequest
    –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –±–µ–∑ httpServletRequest
-->
<html lang="ru" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!--
    MAIN NAVIGATION COMPONENT - SIMPLIFIED / –û–°–ù–û–í–ù–û–ô –ö–û–ú–ü–û–ù–ï–ù–¢ –ù–ê–í–ò–ì–ê–¶–ò–ò - –£–ü–†–û–©–ï–ù–ù–´–ô
    Fixed version without httpServletRequest dependency for fragment compatibility
    –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç httpServletRequest –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
-->
<nav class="navbar navbar-expand-lg navbar-light navbar-custom fixed-top" th:fragment="main-navigation">
    <div class="container">
        <!--
            BRAND LOGO AND NAME / –õ–û–ì–û–¢–ò–ü –ò –ù–ê–ó–í–ê–ù–ò–ï –ë–†–ï–ù–î–ê
            Organization branding remains unchanged
            –ë—Ä–µ–Ω–¥–∏–Ω–≥ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        -->
        <a class="navbar-brand logo-brand" href="/" th:href="@{/}">
            <img src="/images/optimized/logo.png"
                 alt="–õ–∞–¥–∞ - –û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è"
                 class="logo-image"
                 th:onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block'">
            <span style="color: var(--primary-800); display: none;">üèõÔ∏è –õ–∞–¥–∞</span>
        </a>

        <!--
            MOBILE MENU TOGGLE / –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –ú–û–ë–ò–õ–¨–ù–û–ì–û –ú–ï–ù–Æ
            Hamburger menu button remains unchanged
            –ö–Ω–æ–ø–∫–∞ –≥–∞–º–±—É—Ä–≥–µ—Ä-–º–µ–Ω—é –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!--
            NAVIGATION MENU ITEMS - SIMPLIFIED / –ü–£–ù–ö–¢–´ –ù–ê–í–ò–ì–ê–¶–ò–û–ù–ù–û–ì–û –ú–ï–ù–Æ - –£–ü–†–û–©–ï–ù–ù–´–ï
            Fixed: Removed httpServletRequest expressions causing null pointer exceptions
            –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –£–±—Ä–∞–Ω—ã –≤—ã—Ä–∞–∂–µ–Ω–∏—è httpServletRequest –≤—ã–∑—ã–≤–∞—é—â–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è null pointer
            Solution: Active states will be handled by JavaScript or server-side logic
            –†–µ—à–µ–Ω–∏–µ: –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è JavaScript –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
        -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <!--
                    SIMPLIFIED NAVIGATION LINKS / –£–ü–†–û–©–ï–ù–ù–´–ï –ù–ê–í–ò–ì–ê–¶–ò–û–ù–ù–´–ï –°–°–´–õ–ö–ò
                    Removed problematic th:classappend with httpServletRequest
                    –£–±—Ä–∞–Ω—ã –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ th:classappend —Å httpServletRequest
                    Active states will be implemented later with JavaScript
                    –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±—É–¥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ–∑–∂–µ —Å –ø–æ–º–æ—â—å—é JavaScript
                -->
                <li class="nav-item">
                    <a class="nav-link fw-semibold" href="/" th:href="@{/}">
                        –ì–ª–∞–≤–Ω–∞—è
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link fw-semibold" href="/about" th:href="@{/about}">
                        –û –Ω–∞—Å
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link fw-semibold" href="/projects" th:href="@{/projects}">
                        –ù–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link fw-semibold" href="/gallery" th:href="@{/gallery}">
                        –ì–∞–ª–µ—Ä–µ—è
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link fw-semibold" href="/patrons" th:href="@{/patrons}">
                        –ú–µ—Ü–µ–Ω–∞—Ç–∞–º
                    </a>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link fw-semibold" href="/team" th:href="@{/team}">
                        –ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link fw-semibold" href="/contact" th:href="@{/contact}">
                        –ö–æ–Ω—Ç–∞–∫—Ç—ã
                    </a>
                </li>
                <!--
                    ADMIN DASHBOARD LINK - WORKS CORRECTLY / –°–°–´–õ–ö–ê –ù–ê –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø - –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û
                    Spring Security integration works fine with sec:authorize
                    –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Spring Security —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å sec:authorize
                    This was not the source of the problem
                    –≠—Ç–æ –Ω–µ –±—ã–ª–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø—Ä–æ–±–ª–µ–º—ã
                -->
                <li class="nav-item" sec:authorize="isAuthenticated()">
                    <a class="nav-link fw-semibold text-success" href="/admin" th:href="@{/admin}">
                        <span class="me-1">‚öôÔ∏è</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>