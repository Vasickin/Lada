# ================================
# Amvera Cloud Configuration
# ================================

# Server port (Amvera provides this via PORT env var)
server.port=${PORT:8080}

# Database (will be set via environment variables in Amvera panel)
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Connection pool (optimized for cloud)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JPA
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# File upload - CRITICAL: use /data/uploads for persistent storage in Amvera
file.upload-dir=/data/uploads
spring.web.resources.static-locations=classpath:/static/,file:/data/uploads/

# Thymeleaf cache for production
spring.thymeleaf.cache=true

# Logging to persistent storage in Amvera
logging.file.name=/data/logs/application.log
logging.level.com.community.cms=INFO
logging.level.org.springframework.web=WARN
logging.level.org.hibernate=WARN

# Disable dev tools in production
spring.devtools.restart.enabled=false
