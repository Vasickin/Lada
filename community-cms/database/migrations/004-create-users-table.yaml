databaseChangeLog:
  - changeSet:
      id: 004-1-create-users-table
      author: Lex
      preConditions:
        - onFail: MARK_RAN
        - not:
            - tableExists:
                tableName: users
      changes:
        - createTable:
            tableName: users
            columns:
              - column: {name: id, type: BIGINT, autoIncrement: true, constraints: {primaryKey: true, nullable: false}}
              - column: {name: username, type: VARCHAR(50), constraints: {nullable: false, unique: true}}
              - column: {name: password, type: VARCHAR(255), constraints: {nullable: false}}
              - column: {name: email, type: VARCHAR(100)}
              - column: {name: enabled, type: BOOLEAN, defaultValueBoolean: true}
              - column: {name: created_at, type: TIMESTAMP, defaultValueComputed: "CURRENT_TIMESTAMP"}
              - column: {name: updated_at, type: TIMESTAMP, defaultValueComputed: "CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP"}

  - changeSet:
      id: 004-2-insert-admin-user
      author: Lex
      changes:
        - insert:
            tableName: users
            columns:
              - column: {name: username, value: "admin"}
              - column: {name: password, value: "$2a$10$X7B2N2LpVzLkYQH1WqoQeOJvKvW6nY8ZtR3sA4bC7dE9fG0hI1j2k3l"}  # Пароль: admin
              - column: {name: email, value: "admin@lada.ru"}
              - column: {name: enabled, valueBoolean: true}